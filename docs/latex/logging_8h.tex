\hypertarget{logging_8h}{}\doxysection{logging.\+h File Reference}
\label{logging_8h}\index{logging.h@{logging.h}}


Logging interface.  


{\ttfamily \#include \char`\"{}am/common.\+h\char`\"{}}\newline
\doxysubsection*{Data Structures}
\begin{DoxyCompactItemize}
\item 
struct \mbox{\hyperlink{structam__log__field}{am\+\_\+log\+\_\+field}}
\begin{DoxyCompactList}\small\item\em Data field to be logged. \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsection*{Macros}
\begin{DoxyCompactItemize}
\item 
\mbox{\Hypertarget{logging_8h_a5061648da2f13a28fee19c974ac5db0d}\label{logging_8h_a5061648da2f13a28fee19c974ac5db0d}} 
\#define {\bfseries A\+M\+\_\+\+L\+O\+G\+\_\+\+L\+E\+V\+E\+L\+\_\+\+M\+A\+SK}~($\sim$(A\+M\+\_\+\+L\+O\+G\+\_\+\+F\+L\+A\+G\+\_\+\+R\+E\+C\+U\+R\+S\+I\+ON $\vert$ A\+M\+\_\+\+L\+O\+G\+\_\+\+F\+L\+A\+G\+\_\+\+F\+A\+T\+AL))
\item 
\mbox{\Hypertarget{logging_8h_a7186da7b6630d39bda4e751801628641}\label{logging_8h_a7186da7b6630d39bda4e751801628641}} 
\#define {\bfseries A\+M\+\_\+\+L\+O\+G\+\_\+\+W\+R\+I\+T\+E\+R\+\_\+\+H\+A\+N\+D\+L\+ED}~1
\item 
\mbox{\Hypertarget{logging_8h_a5a0eca25f899787e0da364bde0326a35}\label{logging_8h_a5a0eca25f899787e0da364bde0326a35}} 
\#define {\bfseries A\+M\+\_\+\+L\+O\+G\+\_\+\+W\+R\+I\+T\+E\+R\+\_\+\+U\+N\+H\+A\+N\+D\+L\+ED}~0
\item 
\#define {\bfseries A\+M\+\_\+\+L\+O\+G\+\_\+\+S\+T\+D\+\_\+\+F\+L\+DS}
\item 
\#define {\bfseries A\+M\+\_\+\+D\+E\+B\+U\+G\+\_\+\+H\+E\+RE}()
\item 
\#define {\bfseries am\+\_\+contract}(domain,  level,  expr)
\end{DoxyCompactItemize}
\doxysubsection*{Typedefs}
\begin{DoxyCompactItemize}
\item 
typedef int \mbox{\hyperlink{logging_8h_acfdb2cb1341830e76427a5cb5fb96b96}{am\+\_\+log\+\_\+writer\+\_\+fn}}(enum am\+\_\+log\+\_\+level\+\_\+flags log\+\_\+level, const struct \mbox{\hyperlink{structam__log__field}{am\+\_\+log\+\_\+field}} $\ast$fields, size\+\_\+t num\+\_\+fields, void $\ast$userdata)
\begin{DoxyCompactList}\small\item\em Function type for handling log events. \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsection*{Enumerations}
\begin{DoxyCompactItemize}
\item 
\mbox{\Hypertarget{logging_8h_a913c1513acd23e64049fe27e532b10b3}\label{logging_8h_a913c1513acd23e64049fe27e532b10b3}} 
enum {\bfseries am\+\_\+log\+\_\+level\+\_\+flags} \{ \newline
{\bfseries A\+M\+\_\+\+L\+O\+G\+\_\+\+F\+L\+A\+G\+\_\+\+R\+E\+C\+U\+R\+S\+I\+ON} = 1 $<$$<$ 0, 
{\bfseries A\+M\+\_\+\+L\+O\+G\+\_\+\+F\+L\+A\+G\+\_\+\+F\+A\+T\+AL} = 1 $<$$<$ 1, 
{\bfseries A\+M\+\_\+\+L\+O\+G\+\_\+\+L\+E\+V\+E\+L\+\_\+\+C\+R\+I\+T\+I\+C\+AL} = 1 $<$$<$ 2, 
{\bfseries A\+M\+\_\+\+L\+O\+G\+\_\+\+L\+E\+V\+E\+L\+\_\+\+E\+R\+R\+OR} = 1 $<$$<$ 3, 
\newline
{\bfseries A\+M\+\_\+\+L\+O\+G\+\_\+\+L\+E\+V\+E\+L\+\_\+\+W\+A\+R\+N\+I\+NG} = 1 $<$$<$ 4, 
{\bfseries A\+M\+\_\+\+L\+O\+G\+\_\+\+L\+E\+V\+E\+L\+\_\+\+N\+O\+T\+I\+CE} = 1 $<$$<$ 5, 
{\bfseries A\+M\+\_\+\+L\+O\+G\+\_\+\+L\+E\+V\+E\+L\+\_\+\+I\+N\+FO} = 1 $<$$<$ 6, 
{\bfseries A\+M\+\_\+\+L\+O\+G\+\_\+\+L\+E\+V\+E\+L\+\_\+\+D\+E\+B\+UG} = 1 $<$$<$ 7
 \}
\end{DoxyCompactItemize}
\doxysubsection*{Functions}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{common_8h_adde7826e22e450172a0c1efe8f9e297f}{A\+M\+\_\+\+A\+PI}} void \mbox{\hyperlink{logging_8h_aab7ebeb1d76f0828d8eb264c93e754e9}{am\+\_\+log}} (enum am\+\_\+log\+\_\+level\+\_\+flags log\+\_\+level,...)
\begin{DoxyCompactList}\small\item\em Emit a log event. \end{DoxyCompactList}\item 
\mbox{\hyperlink{common_8h_adde7826e22e450172a0c1efe8f9e297f}{A\+M\+\_\+\+A\+PI}} void \mbox{\hyperlink{logging_8h_a9d53d0b4b1a072dbc5c8cc5b6cabd68b}{am\+\_\+logv}} (enum am\+\_\+log\+\_\+level\+\_\+flags log\+\_\+level, va\+\_\+list args)
\begin{DoxyCompactList}\small\item\em Emit a log event. \end{DoxyCompactList}\item 
\mbox{\hyperlink{common_8h_adde7826e22e450172a0c1efe8f9e297f}{A\+M\+\_\+\+A\+PI}} void \mbox{\hyperlink{logging_8h_aa2ac2548fb9e028e82c17ef352f5513b}{am\+\_\+log\+\_\+array}} (enum am\+\_\+log\+\_\+level\+\_\+flags log\+\_\+level, const struct \mbox{\hyperlink{structam__log__field}{am\+\_\+log\+\_\+field}} $\ast$fields, size\+\_\+t num\+\_\+fields)
\begin{DoxyCompactList}\small\item\em Emit a log event. \end{DoxyCompactList}\item 
\mbox{\hyperlink{common_8h_adde7826e22e450172a0c1efe8f9e297f}{A\+M\+\_\+\+A\+PI}} void \mbox{\hyperlink{logging_8h_a14bb240010b67348b572867a9b2b4454}{am\+\_\+log\+\_\+set\+\_\+writer}} (\mbox{\hyperlink{logging_8h_acfdb2cb1341830e76427a5cb5fb96b96}{am\+\_\+log\+\_\+writer\+\_\+fn}} $\ast$fn, void $\ast$userdata)
\begin{DoxyCompactList}\small\item\em Set the log writer function. \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsection*{Variables}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{common_8h_adde7826e22e450172a0c1efe8f9e297f}{A\+M\+\_\+\+A\+PI}} \mbox{\hyperlink{logging_8h_acfdb2cb1341830e76427a5cb5fb96b96}{am\+\_\+log\+\_\+writer\+\_\+fn}} \mbox{\hyperlink{logging_8h_a21889ffa1741790e6ec74443a50d3a3b}{am\+\_\+log\+\_\+writer\+\_\+default}}
\begin{DoxyCompactList}\small\item\em The default writer function, writes to {\ttfamily stderr} ~\newline
 \end{DoxyCompactList}\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}
Logging interface. 

The recommended fields\+: A\+M\+L\+I\+B\+\_\+\+D\+O\+M\+A\+IN -\/ the domain of the logging. \char`\"{}amlib\char`\"{} for amlib functions. M\+E\+S\+S\+A\+GE -\/ The human-\/readable message string. M\+E\+S\+S\+A\+G\+E\+\_\+\+ID -\/ 128-\/bit identifier. Created using {\ttfamily systemd-\/id128 new}. P\+R\+I\+O\+R\+I\+TY -\/ Syslog priority value. Set automatically by logging functions based on log level. C\+O\+D\+E\+\_\+\+F\+I\+LE, C\+O\+D\+E\+\_\+\+L\+I\+NE, C\+O\+D\+E\+\_\+\+F\+U\+NC -\/ Source code info. E\+R\+R\+NO -\/ value of {\ttfamily errno}. 

\doxysubsection{Macro Definition Documentation}
\mbox{\Hypertarget{logging_8h_af30f368bd9bd6803920049bd4619b053}\label{logging_8h_af30f368bd9bd6803920049bd4619b053}} 
\index{logging.h@{logging.h}!am\_contract@{am\_contract}}
\index{am\_contract@{am\_contract}!logging.h@{logging.h}}
\doxysubsubsection{\texorpdfstring{am\_contract}{am\_contract}}
{\footnotesize\ttfamily \#define am\+\_\+contract(\begin{DoxyParamCaption}\item[{}]{domain,  }\item[{}]{level,  }\item[{}]{expr }\end{DoxyParamCaption})}

{\bfseries Value\+:}
\begin{DoxyCode}{0}
\DoxyCodeLine{    ((expr) \(\backslash\)}
\DoxyCodeLine{     ? \textcolor{keyword}{true} \(\backslash\)}
\DoxyCodeLine{     : (\mbox{\hyperlink{logging_8h_aab7ebeb1d76f0828d8eb264c93e754e9}{am\_log}}(level, AM\_LOG\_STD\_FLDS, \textcolor{stringliteral}{"AMLIB\_DOMAIN"}, domain, \textcolor{stringliteral}{"MESSAGE"}, \textcolor{stringliteral}{"\%s: contract violation: \(\backslash\)"\%s\(\backslash\)""}, \mbox{\hyperlink{common_8h_acee1f56800f8e80f25d12b4841ba99df}{AM\_STRFUNC}}, \#expr), \textcolor{keyword}{false}))}

\end{DoxyCode}
\mbox{\Hypertarget{logging_8h_a2d0b2b4aebba4779c2dc85a557c5119b}\label{logging_8h_a2d0b2b4aebba4779c2dc85a557c5119b}} 
\index{logging.h@{logging.h}!AM\_DEBUG\_HERE@{AM\_DEBUG\_HERE}}
\index{AM\_DEBUG\_HERE@{AM\_DEBUG\_HERE}!logging.h@{logging.h}}
\doxysubsubsection{\texorpdfstring{AM\_DEBUG\_HERE}{AM\_DEBUG\_HERE}}
{\footnotesize\ttfamily \#define A\+M\+\_\+\+D\+E\+B\+U\+G\+\_\+\+H\+E\+RE(\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}

{\bfseries Value\+:}
\begin{DoxyCode}{0}
\DoxyCodeLine{    \mbox{\hyperlink{logging_8h_aab7ebeb1d76f0828d8eb264c93e754e9}{am\_log}}(NULL, AM\_LOG\_LEVEL\_DEBUG,                  \(\backslash\)}
\DoxyCodeLine{            AM\_LOG\_STD\_FLDS                           \(\backslash\)}
\DoxyCodeLine{            \textcolor{stringliteral}{"MESSAGE"}, \textcolor{stringliteral}{"AM\_DEBUG\_HERE(): "} \mbox{\hyperlink{common_8h_a55c1f1e9e093d6833d8db2b2a1a1b629}{AM\_STRLOC}})}

\end{DoxyCode}
\mbox{\Hypertarget{logging_8h_a0a318995add9488899cdc9d7bc4cd359}\label{logging_8h_a0a318995add9488899cdc9d7bc4cd359}} 
\index{logging.h@{logging.h}!AM\_LOG\_STD\_FLDS@{AM\_LOG\_STD\_FLDS}}
\index{AM\_LOG\_STD\_FLDS@{AM\_LOG\_STD\_FLDS}!logging.h@{logging.h}}
\doxysubsubsection{\texorpdfstring{AM\_LOG\_STD\_FLDS}{AM\_LOG\_STD\_FLDS}}
{\footnotesize\ttfamily \#define A\+M\+\_\+\+L\+O\+G\+\_\+\+S\+T\+D\+\_\+\+F\+L\+DS}

{\bfseries Value\+:}
\begin{DoxyCode}{0}
\DoxyCodeLine{    \textcolor{stringliteral}{"CODE\_FILE"}, \_\_FILE\_\_,               \(\backslash\)}
\DoxyCodeLine{    \textcolor{stringliteral}{"CODE\_LINE"}, \mbox{\hyperlink{common_8h_ae9b5e13d6e2112dd9bc092f1dd8e5aff}{AM\_STRINGIFY}}(\_\_LINE\_\_), \(\backslash\)}
\DoxyCodeLine{    \textcolor{stringliteral}{"CODE\_FUNC"}, \mbox{\hyperlink{common_8h_acee1f56800f8e80f25d12b4841ba99df}{AM\_STRFUNC}}}

\end{DoxyCode}


\doxysubsection{Typedef Documentation}
\mbox{\Hypertarget{logging_8h_acfdb2cb1341830e76427a5cb5fb96b96}\label{logging_8h_acfdb2cb1341830e76427a5cb5fb96b96}} 
\index{logging.h@{logging.h}!am\_log\_writer\_fn@{am\_log\_writer\_fn}}
\index{am\_log\_writer\_fn@{am\_log\_writer\_fn}!logging.h@{logging.h}}
\doxysubsubsection{\texorpdfstring{am\_log\_writer\_fn}{am\_log\_writer\_fn}}
{\footnotesize\ttfamily typedef int am\+\_\+log\+\_\+writer\+\_\+fn(enum am\+\_\+log\+\_\+level\+\_\+flags log\+\_\+level, const struct \mbox{\hyperlink{structam__log__field}{am\+\_\+log\+\_\+field}} $\ast$fields, size\+\_\+t num\+\_\+fields, void $\ast$userdata)}



Function type for handling log events. 



\doxysubsection{Function Documentation}
\mbox{\Hypertarget{logging_8h_aab7ebeb1d76f0828d8eb264c93e754e9}\label{logging_8h_aab7ebeb1d76f0828d8eb264c93e754e9}} 
\index{logging.h@{logging.h}!am\_log@{am\_log}}
\index{am\_log@{am\_log}!logging.h@{logging.h}}
\doxysubsubsection{\texorpdfstring{am\_log()}{am\_log()}}
{\footnotesize\ttfamily \mbox{\hyperlink{common_8h_adde7826e22e450172a0c1efe8f9e297f}{A\+M\+\_\+\+A\+PI}} void am\+\_\+log (\begin{DoxyParamCaption}\item[{enum am\+\_\+log\+\_\+level\+\_\+flags}]{log\+\_\+level,  }\item[{}]{... }\end{DoxyParamCaption})}



Emit a log event. 


\begin{DoxyParams}{Parameters}
{\em log\+\_\+level} & The severity level \\
\hline
{\em ...} & Logging field names and values. \\
\hline
\end{DoxyParams}
\begin{DoxyNote}{Note}
If the \char`\"{}\+M\+E\+S\+S\+A\+G\+E\char`\"{} field is provided, it must be the final field. The following arguments are passed to {\ttfamily sprintf} with a 2048-\/byte buffer. 
\end{DoxyNote}
\mbox{\Hypertarget{logging_8h_aa2ac2548fb9e028e82c17ef352f5513b}\label{logging_8h_aa2ac2548fb9e028e82c17ef352f5513b}} 
\index{logging.h@{logging.h}!am\_log\_array@{am\_log\_array}}
\index{am\_log\_array@{am\_log\_array}!logging.h@{logging.h}}
\doxysubsubsection{\texorpdfstring{am\_log\_array()}{am\_log\_array()}}
{\footnotesize\ttfamily \mbox{\hyperlink{common_8h_adde7826e22e450172a0c1efe8f9e297f}{A\+M\+\_\+\+A\+PI}} void am\+\_\+log\+\_\+array (\begin{DoxyParamCaption}\item[{enum am\+\_\+log\+\_\+level\+\_\+flags}]{log\+\_\+level,  }\item[{const struct \mbox{\hyperlink{structam__log__field}{am\+\_\+log\+\_\+field}} $\ast$}]{fields,  }\item[{size\+\_\+t}]{num\+\_\+fields }\end{DoxyParamCaption})}



Emit a log event. 


\begin{DoxyParams}{Parameters}
{\em log\+\_\+level} & The severity level \\
\hline
{\em fields} & Logging fields \\
\hline
{\em num\+\_\+fields} & The number of fields \\
\hline
\end{DoxyParams}
\mbox{\Hypertarget{logging_8h_a14bb240010b67348b572867a9b2b4454}\label{logging_8h_a14bb240010b67348b572867a9b2b4454}} 
\index{logging.h@{logging.h}!am\_log\_set\_writer@{am\_log\_set\_writer}}
\index{am\_log\_set\_writer@{am\_log\_set\_writer}!logging.h@{logging.h}}
\doxysubsubsection{\texorpdfstring{am\_log\_set\_writer()}{am\_log\_set\_writer()}}
{\footnotesize\ttfamily \mbox{\hyperlink{common_8h_adde7826e22e450172a0c1efe8f9e297f}{A\+M\+\_\+\+A\+PI}} void am\+\_\+log\+\_\+set\+\_\+writer (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{logging_8h_acfdb2cb1341830e76427a5cb5fb96b96}{am\+\_\+log\+\_\+writer\+\_\+fn}} $\ast$}]{fn,  }\item[{void $\ast$}]{userdata }\end{DoxyParamCaption})}



Set the log writer function. 


\begin{DoxyParams}{Parameters}
{\em fn} & The writer function. If {\ttfamily N\+U\+LL}, set to the default. \\
\hline
{\em userdata} & The writer function userdata \\
\hline
\end{DoxyParams}
\mbox{\Hypertarget{logging_8h_a9d53d0b4b1a072dbc5c8cc5b6cabd68b}\label{logging_8h_a9d53d0b4b1a072dbc5c8cc5b6cabd68b}} 
\index{logging.h@{logging.h}!am\_logv@{am\_logv}}
\index{am\_logv@{am\_logv}!logging.h@{logging.h}}
\doxysubsubsection{\texorpdfstring{am\_logv()}{am\_logv()}}
{\footnotesize\ttfamily \mbox{\hyperlink{common_8h_adde7826e22e450172a0c1efe8f9e297f}{A\+M\+\_\+\+A\+PI}} void am\+\_\+logv (\begin{DoxyParamCaption}\item[{enum am\+\_\+log\+\_\+level\+\_\+flags}]{log\+\_\+level,  }\item[{va\+\_\+list}]{args }\end{DoxyParamCaption})}



Emit a log event. 


\begin{DoxyParams}{Parameters}
{\em log\+\_\+level} & The severity level \\
\hline
{\em args} & Logging field names and values. \\
\hline
\end{DoxyParams}
\begin{DoxyNote}{Note}
If the \char`\"{}\+M\+E\+S\+S\+A\+G\+E\char`\"{} field is provided, it must be the final field. The following arguments are passed to {\ttfamily sprintf} with a 1024-\/byte buffer. 
\end{DoxyNote}


\doxysubsection{Variable Documentation}
\mbox{\Hypertarget{logging_8h_a21889ffa1741790e6ec74443a50d3a3b}\label{logging_8h_a21889ffa1741790e6ec74443a50d3a3b}} 
\index{logging.h@{logging.h}!am\_log\_writer\_default@{am\_log\_writer\_default}}
\index{am\_log\_writer\_default@{am\_log\_writer\_default}!logging.h@{logging.h}}
\doxysubsubsection{\texorpdfstring{am\_log\_writer\_default}{am\_log\_writer\_default}}
{\footnotesize\ttfamily \mbox{\hyperlink{common_8h_adde7826e22e450172a0c1efe8f9e297f}{A\+M\+\_\+\+A\+PI}} \mbox{\hyperlink{logging_8h_acfdb2cb1341830e76427a5cb5fb96b96}{am\+\_\+log\+\_\+writer\+\_\+fn}} am\+\_\+log\+\_\+writer\+\_\+default}



The default writer function, writes to {\ttfamily stderr} ~\newline
 

